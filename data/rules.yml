version: "3.1"

rules:
- rule: Start MCQ question flow
  steps:
    - intent: ask_mcq
    - action: utter_ask_mcq_question
    - slot_was_set:
        - question_type: "mcq"

- rule: Process provided MCQ
  steps:
    - intent: provide_mcq
    - action: action_run_mcq
    - action: utter_ask_another_mcq_question
    - slot_was_set:
        - mcq_question: null

- rule: Affirm another MCQ question
  condition:
    - slot_was_set:
        - question_type: "mcq"
  steps:
    - intent: affirm_another_question
    - action: utter_ask_mcq_question
    - slot_was_set:
        - question_type: "mcq"

- rule: Affirm another short-answer question
  condition:
    - slot_was_set:
        - question_type: "short_qa"
  steps:
    - intent: affirm_another_shortqa_question
    - action: utter_ask_short_qa_question
    - slot_was_set:
        - question_type: "short_qa"

- rule: Start short-answer question flow
  steps:
    - intent: ask_short_qa
    - action: utter_ask_short_qa_question
    - slot_was_set:
        - question_type: "short_qa"

- rule: Process provided short-answer question
  steps:
    - intent: provide_short_qa
    - action: action_run_short_qa
    - action: utter_ask_another_shortqa_question
    - slot_was_set:
        - short_qa_question: null
- rule: Respond to long question mention
  steps:
    - intent: mention_long_question
    - action: utter_only_mcq_short_answer
    
- rule: Say goodbye anytime the user says goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye
    - action: action_end_conversation
    - slot_was_set: # clear slots
        - mcq_question: null
        - short_qa_question: null
        - question_type: null

- rule: Say 'I am a bot' anytime the user challenges
  steps:
    - intent: bot_challenge
    - action: utter_iamabot
    - slot_was_set:
        - mcq_question: null
        - short_qa_question: null
        - question_type: null
